<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Firebase Test | OnSwitch Cyber Patriot Coaching</title>
    <meta name="description" content="Cyber Patriot competition coaching and training materials. Helping high school students excel in cybersecurity competitions.">
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://onswitch.ca/test/">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    
    <!-- Firebase Configuration -->
<!-- Replace with your actual Firebase config -->
<script>
// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAMa3HXxr9jz7nCXRiCs_GBoveMwvP-f0Q",
  authDomain: "onswitch-55a54.firebaseapp.com",
  projectId: "onswitch-55a54",
  storageBucket: "onswitch-55a54.firebasestorage.app",
  messagingSenderId: "903676125597",
  appId: "1:903676125597:web:803e4621e8bb53ddb00f74",
  measurementId: "G-TC543BX6Y0"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);

// Initialize Firebase Auth
const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

// Configure Google Auth Provider
const googleProvider = new firebase.auth.GoogleAuthProvider();
googleProvider.addScope('email');
googleProvider.addScope('profile');
</script>

<!-- 
To set up Firebase:
1. Go to https://firebase.google.com/
2. Create a new project
3. Enable Authentication with Google provider
4. Enable Firestore Database
5. Enable Storage
6. Replace the config above with your actual values from Project Settings
-->
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Firebase Test | OnSwitch Cyber Patriot Coaching</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Firebase Test" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Cyber Patriot competition coaching and training materials. Helping high school students excel in cybersecurity competitions." />
<meta property="og:description" content="Cyber Patriot competition coaching and training materials. Helping high school students excel in cybersecurity competitions." />
<link rel="canonical" href="https://onswitch.ca/test/" />
<meta property="og:url" content="https://onswitch.ca/test/" />
<meta property="og:site_name" content="OnSwitch Cyber Patriot Coaching" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Firebase Test" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Cyber Patriot competition coaching and training materials. Helping high school students excel in cybersecurity competitions.","headline":"Firebase Test","url":"https://onswitch.ca/test/"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>
    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="/" class="brand-link">
                    <i class="fas fa-shield-alt"></i>
                    OnSwitch
                </a>
            </div>
            
            <div class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <ul class="nav-menu" id="nav-menu">
                <li class="nav-item">
                    <a href="/" class="nav-link ">
                        <i class="fas fa-home"></i> Home
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/about" class="nav-link ">
                        <i class="fas fa-user"></i> About
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/contact" class="nav-link ">
                        <i class="fas fa-envelope"></i> Contact
                    </a>
                </li>
                <li class="nav-item auth-required" style="display: none;">
                    <a href="/training" class="nav-link ">
                        <i class="fas fa-book"></i> Training
                    </a>
                </li>
                <li class="nav-item admin-required" style="display: none;">
                    <a href="/admin" class="nav-link ">
                        <i class="fas fa-cog"></i> Admin
                    </a>
                </li>
                
                <!-- Authentication buttons -->
                <li class="nav-item auth-buttons">
                    <button id="login-btn" class="btn btn-primary">
                        <i class="fab fa-google"></i> Sign In
                    </button>
                    <div id="user-menu" class="user-menu" style="display: none;">
                        <img id="user-avatar" class="user-avatar" src="" alt="User Avatar">
                        <span id="user-name" class="user-name"></span>
                        <div class="user-dropdown">
                            <button id="logout-btn" class="btn btn-secondary">
                                <i class="fas fa-sign-out-alt"></i> Sign Out
                            </button>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>
    </div>
</header>
    
    <main class="main-content" role="main">
        <section class="page-header">
    <div class="container">
        <h1><i class="fas fa-cog"></i> Firebase Test</h1>
        <p>Test Firebase connection and functionality</p>
    </div>
</section>

<section class="test-section">
    <div class="container">
        <div class="test-grid">
            <div class="test-card">
                <h3>Authentication Test</h3>
                <p id="auth-status">Checking...</p>
                <button id="test-auth" class="btn btn-primary">Test Auth</button>
            </div>
            
            <div class="test-card">
                <h3>Firestore Test</h3>
                <p id="firestore-status">Ready</p>
                <button id="test-firestore" class="btn btn-primary">Test Firestore</button>
            </div>
            
            <div class="test-card">
                <h3>Storage Test</h3>
                <p id="storage-status">Ready</p>
                <input type="file" id="test-file" accept="*/*">
                <button id="test-storage" class="btn btn-primary">Test Upload</button>
                <div id="upload-progress-test" style="display: none; margin-top: 10px;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="test-progress-fill"></div>
                    </div>
                    <small id="test-progress-text">Uploading...</small>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.test-section {
    padding: 3rem 0;
}

.test-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
}

.test-card {
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 2rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.test-card h3 {
    color: #2c3e50;
    margin-bottom: 1rem;
}

.test-card p {
    margin-bottom: 1rem;
    color: #6c757d;
}

.test-card input {
    width: 100%;
    margin-bottom: 1rem;
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Test authentication status
    const authStatus = document.getElementById('auth-status');
    
    if (window.authManager) {
        auth.onAuthStateChanged((user) => {
            if (user) {
                authStatus.textContent = `Logged in as: ${user.displayName || user.email}`;
                authStatus.style.color = 'green';
            } else {
                authStatus.textContent = 'Not logged in';
                authStatus.style.color = 'orange';
            }
        });
    } else {
        authStatus.textContent = 'Auth manager not loaded';
        authStatus.style.color = 'red';
    }
    
    // Test auth button
    document.getElementById('test-auth').addEventListener('click', () => {
        if (window.authManager) {
            window.authManager.signIn();
        } else {
            alert('Auth manager not available');
        }
    });
    
    // Test Firestore
    document.getElementById('test-firestore').addEventListener('click', async () => {
        const firestoreStatus = document.getElementById('firestore-status');
        
        try {
            firestoreStatus.textContent = 'Testing...';
            firestoreStatus.style.color = 'blue';
            
            // Try to read from a collection
            const testDoc = await db.collection('test').doc('connection').set({
                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                message: 'Test connection successful'
            });
            
            firestoreStatus.textContent = 'Firestore connection successful!';
            firestoreStatus.style.color = 'green';
            
        } catch (error) {
            console.error('Firestore test error:', error);
            firestoreStatus.textContent = `Error: ${error.message}`;
            firestoreStatus.style.color = 'red';
        }
    });
    
    // Test Storage
    document.getElementById('test-storage').addEventListener('click', async () => {
        const storageStatus = document.getElementById('storage-status');
        const fileInput = document.getElementById('test-file');
        
        if (!fileInput.files[0]) {
            alert('Please select a file first');
            return;
        }
        
        try {
            storageStatus.textContent = 'Uploading...';
            storageStatus.style.color = 'blue';
            
            const file = fileInput.files[0];
            const fileName = `test-uploads/${Date.now()}_${file.name}`;
            const storageRef = storage.ref().child(fileName);
            
            // Show progress
            const progressContainer = document.getElementById('upload-progress-test');
            const progressFill = document.getElementById('test-progress-fill');
            const progressText = document.getElementById('test-progress-text');
            
            progressContainer.style.display = 'block';
            
            const uploadTask = storageRef.put(file);
            
            uploadTask.on('state_changed',
                (snapshot) => {
                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                    progressFill.style.width = progress + '%';
                    progressText.textContent = `Uploading... ${Math.round(progress)}%`;
                },
                (error) => {
                    console.error('Upload error:', error);
                    storageStatus.textContent = `Upload error: ${error.message}`;
                    storageStatus.style.color = 'red';
                    progressContainer.style.display = 'none';
                },
                async () => {
                    const downloadURL = await uploadTask.snapshot.ref.getDownloadURL();
                    storageStatus.textContent = 'Upload successful!';
                    storageStatus.style.color = 'green';
                    progressText.textContent = 'Upload complete!';
                    
                    console.log('File uploaded successfully. Download URL:', downloadURL);
                    
                    setTimeout(() => {
                        progressContainer.style.display = 'none';
                    }, 2000);
                }
            );
            
        } catch (error) {
            console.error('Storage test error:', error);
            storageStatus.textContent = `Error: ${error.message}`;
            storageStatus.style.color = 'red';
        }
    });
});
</script>
    </main>
    
    <footer class="site-footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-section">
                <h3>OnSwitch</h3>
                <p>Cyber Patriot competition coaching and training materials for high school students.</p>
                <div class="social-links">
                    <a href="mailto:coach@onswitch.ca" title="Email">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/about">About</a></li>
                    <li><a href="/contact">Contact</a></li>
                    <li class="auth-required" style="display: none;">
                        <a href="/training">Training Materials</a>
                    </li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Resources</h3>
                <ul>
                    <li><a href="https://www.uscyberpatriot.org/" target="_blank" rel="noopener">CyberPatriot Official</a></li>
                    <li><a href="https://www.sans.org/" target="_blank" rel="noopener">SANS Institute</a></li>
                    <li><a href="https://cybersecurityeducation.org/" target="_blank" rel="noopener">Cybersecurity Education</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2025 OnSwitch. All rights reserved.</p>
            <p>Empowering the next generation of cybersecurity professionals.</p>
        </div>
    </div>
</footer>
    
    <script src="/assets/js/main.js"></script>
    
    <!-- Loading overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading...</p>
        </div>
    </div>
</body>
</html>