<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <title>语音内容 · OnSwitch</title>
    <link rel="stylesheet" href="../../assets/css/main.css" />
    <link rel="stylesheet" href="player.css" />
    <meta name="theme-color" content="#1a1a2e" />
    <meta name="description" content="收听最新的语音内容" />
    <!-- Prevent iOS from auto-linking phone numbers -->
    <meta name="format-detection" content="telephone=no" />
  </head>
  <body>
    <header class="site-header compact">
      <div class="logo">语音播客</div>
      <div style="display: flex; gap: 0.5rem; align-items: center;">
        <button class="theme-btn" id="themeBtn" type="button" aria-label="切换主题">
          <svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
          <svg class="icon-sun hidden" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
        </button>
        <button class="refresh-btn" id="refreshBtn" type="button" aria-label="刷新列表">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
            <path d="M21 3v5h-5" />
          </svg>
        </button>
      </div>
    </header>

    <main class="audio-shell">
      <!-- Loading State -->
      <div class="loading-state" id="loadingState">
        <div class="spinner"></div>
        <p>正在加载内容...</p>
      </div>

      <!-- Error State -->
      <div class="error-state hidden" id="errorState">
        <div class="error-icon">⚠️</div>
        <p class="error-message" id="errorMessage">无法加载内容</p>
        <button class="btn primary" id="retryBtn" type="button">重试</button>
      </div>

      <!-- Empty State -->
      <div class="empty-state hidden" id="emptyState">
        <div class="empty-icon">🎵</div>
        <p>暂无音频内容</p>
        <p class="empty-hint">新内容会自动显示在这里</p>
      </div>

      <!-- Episode List -->
      <div class="episode-list hidden" id="episodeList">
        <p class="last-updated" id="lastUpdated"></p>
        <ul class="episodes" id="episodes" role="list">
          <!-- Episodes will be rendered here by JavaScript -->
        </ul>
      </div>

      <!-- Now Playing Bar (sticky at bottom) -->
      <div class="now-playing hidden" id="nowPlaying">
        <div class="now-playing-info">
          <p class="now-playing-title" id="nowPlayingTitle">-</p>
          <p class="now-playing-time">
            <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
          </p>
        </div>
        <div class="now-playing-controls">
          <button class="control-btn" id="rewindBtn" type="button" aria-label="后退15秒">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
              <text x="12" y="15" text-anchor="middle" font-size="6" font-weight="bold">15</text>
            </svg>
          </button>
          <button class="control-btn play-pause" id="playPauseBtn" type="button" aria-label="播放/暂停">
            <svg class="icon-play" width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
              <path d="M8 5v14l11-7z"/>
            </svg>
            <svg class="icon-pause hidden" width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
              <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
            </svg>
          </button>
          <button class="control-btn" id="forwardBtn" type="button" aria-label="快进15秒">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z"/>
              <text x="12" y="15" text-anchor="middle" font-size="6" font-weight="bold">15</text>
            </svg>
          </button>
        </div>
        <div class="progress-bar-container">
          <input type="range" class="progress-bar" id="progressBar" min="0" max="100" value="0" />
        </div>
      </div>
    </main>

    <!-- Hidden audio element -->
    <audio id="audioPlayer" preload="metadata"></audio>

    <script src="player.js" type="module"></script>
  </body>
</html>
